import e from"primevue/ripple";import{UniqueComponentId as t,DomHandler as n}from"primevue/utils";import{openBlock as a,createElementBlock as i,Fragment as d,renderList as o,normalizeClass as r,createElementVNode as s,mergeProps as c,toDisplayString as l,createCommentVNode as h,createBlock as p,resolveDynamicComponent as b,createVNode as u,Transition as g,withCtx as T,withDirectives as v,vShow as f}from"vue";var m={name:"Accordion",emits:["update:activeIndex","tab-open","tab-close","tab-click"],props:{multiple:{type:Boolean,default:!1},activeIndex:{type:[Number,Array],default:null},lazy:{type:Boolean,default:!1},expandIcon:{type:String,default:"pi pi-chevron-right"},collapseIcon:{type:String,default:"pi pi-chevron-down"},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1}},data(){return{id:this.$attrs.id,d_activeIndex:this.activeIndex}},watch:{"$attrs.id":function(e){this.id=e||t()},activeIndex(e){this.d_activeIndex=e}},mounted(){this.id=this.id||t()},methods:{isAccordionTab:e=>"AccordionTab"===e.type.name,isTabActive(e){return this.multiple?this.d_activeIndex&&this.d_activeIndex.includes(e):this.d_activeIndex===e},getTabProp:(e,t)=>e.props?e.props[t]:void 0,getKey(e,t){return this.getTabProp(e,"header")||t},getTabHeaderActionId(e){return`${this.id}_${e}_header_action`},getTabContentId(e){return`${this.id}_${e}_content`},onTabClick(e,t,n){this.changeActiveIndex(e,t,n),this.$emit("tab-click",{originalEvent:e,index:n})},onTabKeyDown(e,t,n){switch(e.code){case"ArrowDown":this.onTabArrowDownKey(e);break;case"ArrowUp":this.onTabArrowUpKey(e);break;case"Home":this.onTabHomeKey(e);break;case"End":this.onTabEndKey(e);break;case"Enter":case"Space":this.onTabEnterKey(e,t,n)}},onTabArrowDownKey(e){const t=this.findNextHeaderAction(e.target.parentElement.parentElement);t?this.changeFocusedTab(e,t):this.onTabHomeKey(e),e.preventDefault()},onTabArrowUpKey(e){const t=this.findPrevHeaderAction(e.target.parentElement.parentElement);t?this.changeFocusedTab(e,t):this.onTabEndKey(e),e.preventDefault()},onTabHomeKey(e){const t=this.findFirstHeaderAction();this.changeFocusedTab(e,t),e.preventDefault()},onTabEndKey(e){const t=this.findLastHeaderAction();this.changeFocusedTab(e,t),e.preventDefault()},onTabEnterKey(e,t,n){this.changeActiveIndex(e,t,n),e.preventDefault()},findNextHeaderAction(e,t=!1){const a=t?e:e.nextElementSibling,i=n.findSingle(a,".p-accordion-header");return i?n.hasClass(i,"p-disabled")?this.findNextHeaderAction(i.parentElement):n.findSingle(i,".p-accordion-header-action"):null},findPrevHeaderAction(e,t=!1){const a=t?e:e.previousElementSibling,i=n.findSingle(a,".p-accordion-header");return i?n.hasClass(i,"p-disabled")?this.findPrevHeaderAction(i.parentElement):n.findSingle(i,".p-accordion-header-action"):null},findFirstHeaderAction(){return this.findNextHeaderAction(this.$el.firstElementChild,!0)},findLastHeaderAction(){return this.findPrevHeaderAction(this.$el.lastElementChild,!0)},changeActiveIndex(e,t,n){if(!this.getTabProp(t,"disabled")){const t=this.isTabActive(n),a=t?"tab-close":"tab-open";this.multiple?t?this.d_activeIndex=this.d_activeIndex.filter((e=>e!==n)):this.d_activeIndex?this.d_activeIndex.push(n):this.d_activeIndex=[n]:this.d_activeIndex=this.d_activeIndex===n?null:n,this.$emit("update:activeIndex",this.d_activeIndex),this.$emit(a,{originalEvent:e,index:n})}},changeFocusedTab(e,t){if(t&&(n.focus(t),this.selectOnFocus)){const n=parseInt(t.parentElement.parentElement.dataset.index,10),a=this.tabs[n];this.changeActiveIndex(e,a,n)}},getTabClass(e){return["p-accordion-tab",{"p-accordion-tab-active":this.isTabActive(e)}]},getTabHeaderClass(e,t){return["p-accordion-header",this.getTabProp(e,"headerClass"),{"p-highlight":this.isTabActive(t),"p-disabled":this.getTabProp(e,"disabled")}]},getTabHeaderIconClass(e){return["p-accordion-toggle-icon",this.isTabActive(e)?this.collapseIcon:this.expandIcon]},getTabContentClass(e){return["p-toggleable-content",this.getTabProp(e,"contentClass")]}},computed:{tabs(){return this.$slots.default().reduce(((e,t)=>(this.isAccordionTab(t)?e.push(t):t.children&&t.children instanceof Array&&t.children.forEach((t=>{this.isAccordionTab(t)&&e.push(t)})),e)),[])}},directives:{ripple:e}};const x={class:"p-accordion p-component"},y=["data-index"],A=["id","tabindex","aria-disabled","aria-expanded","aria-controls","onClick","onKeydown"],I={key:0,class:"p-accordion-header-text"},C=["id","aria-labelledby"],E={class:"p-accordion-content"};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&a.firstChild?a.insertBefore(i,a.firstChild):a.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}("\n.p-accordion-header-action {\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    user-select: none;\n    position: relative;\n    text-decoration: none;\n}\n.p-accordion-header-action:focus {\n    z-index: 1;\n}\n.p-accordion-header-text {\n    line-height: 1;\n}\n"),m.render=function(e,t,n,m,H,P){return a(),i("div",x,[(a(!0),i(d,null,o(P.tabs,((e,t)=>(a(),i("div",{key:P.getKey(e,t),class:r(P.getTabClass(t)),"data-index":t},[s("div",c({style:P.getTabProp(e,"headerStyle"),class:P.getTabHeaderClass(e,t)},P.getTabProp(e,"headerProps")),[s("a",c({id:P.getTabHeaderActionId(t),class:"p-accordion-header-link p-accordion-header-action",tabindex:P.getTabProp(e,"disabled")?-1:n.tabindex,role:"button","aria-disabled":P.getTabProp(e,"disabled"),"aria-expanded":P.isTabActive(t),"aria-controls":P.getTabContentId(t),onClick:n=>P.onTabClick(n,e,t),onKeydown:n=>P.onTabKeyDown(n,e,t)},P.getTabProp(e,"headerActionProps")),[s("span",{class:r(P.getTabHeaderIconClass(t)),"aria-hidden":"true"},null,2),e.props&&e.props.header?(a(),i("span",I,l(e.props.header),1)):h("",!0),e.children&&e.children.header?(a(),p(b(e.children.header),{key:1})):h("",!0)],16,A)],16),u(g,{name:"p-toggleable-content"},{default:T((()=>[!n.lazy||P.isTabActive(t)?v((a(),i("div",c({key:0,id:P.getTabContentId(t),style:P.getTabProp(e,"contentStyle"),class:P.getTabContentClass(e),role:"region","aria-labelledby":P.getTabHeaderActionId(t)},P.getTabProp(e,"contentProps")),[s("div",E,[(a(),p(b(e)))])],16,C)),[[f,!!n.lazy||P.isTabActive(t)]]):h("",!0)])),_:2},1024)],10,y)))),128))])};export{m as default};
