<script>

  
  const otherVueModelObjects = {};
  window.typerefinery = {};
  window.Vue = Vue;
  const { createApp, ref } = Vue;

  function getAllVueCheckBoxComponents() {
    document.querySelectorAll('[data-module="vue-checkBox"]').forEach(_ => {
      let modelName = _.getAttribute("value");
      modelName.trim();
      _.setAttribute("v-model", modelName);
      otherVueModelObjects[modelName] = "";
    });
  }

  function getAllVueRadioButtonComponents () {
    document.querySelectorAll('[data-module="vue-radioButton"]').forEach(_ => {
      let modelName = _.getAttribute("name");
      modelName.trim();
      _.setAttribute("v-model", modelName);
      otherVueModelObjects[modelName] = "";
    });
  }

  function getAllVueComponents() { 
    getAllVueCheckBoxComponents();
    getAllVueRadioButtonComponents();
  }

  getAllVueComponents();

  
  const vueApp = Vue.createApp({
    data() {
      return {
        nodes: [
          {
            "key": "0",
            "label": "Tableau de bord",
            "data": "Tableau de bord",
            "icon": "pi pi-fw pi-star-fill"
          },
          {
            "key": "1",
            "label": "Activites",
            "data": "Activites Folder",
            "icon": "pi pi-fw pi-inbox",
            "children": [{
              "key": "1-0",
              "label": "Analyses",
              "data": "Analyses",
              "icon": "pi pi-fw pi-cog"
            },
            {
              "key": "1-1",
              "label": "Evenments",
              "data": "Evenments",
              "icon": "pi pi-fw pi-home"
            },
            {
              "key": "1-2",
              "label": "Observations",
              "data": "Observations",
              "icon": "pi pi-fw pi-home"
            }]
          },
          {
            "key": "1",
            "label": "Connaissance",
            "data": "Connaissance Folder",
            "icon": "pi pi-fw pi-calendar",
            "children": [
              { "key": "1-0", "label": "Menaces", "icon": "pi pi-fw pi-calendar-plus", "data": "Menaces" },
              { "key": "1-1", "label": "Arsenal", "icon": "pi pi-fw pi-calendar-plus", "data": "Arsenal" },
              { "key": "1-2", "label": "Entites", "icon": "pi pi-fw pi-calendar-plus", "data": "Entites" }]
          },
          {
            "key": "3",
            "label": "Donnes",
            "data": "Donnes",
            "icon": "pi pi-fw pi-star-fill"
          },
          {
            "key": "4",
            "label": "Parametres",
            "data": "Parametres",
            "icon": "pi pi-fw pi-star-fill"
          },
          {
            "key": "5",
            "label": "DataStore",
            "data": "Store Folder",
            "icon": "pi pi-fw pi-inbox",
            "children": [{
              "key": "5-0",
              "label": "Store",
              "data": "Store",
              "icon": "pi pi-fw pi-cog"
            },
            {
              "key": "5-1",
              "label": "Materials",
              "data": "Materials",
              "icon": "pi pi-fw pi-home"
            },
            {
              "key": "5-2",
              "label": "Stories",
              "data": "Stories",
              "icon": "pi pi-fw pi-home"
            }]
          },
        ],
        data: [
          { icon: "pi pi-file", datatype: "Report", description: "Penquins.", status: "RiskIQ", date: "12 Jan,2021", color: "TLP-WHITE" },
          { icon: "pi pi-file", datatype: "Report", description: "DiskKill", status: "RiskIQ", date: "14 Dec,2022", color: "TLP-WHITE" },
          { icon: "pi pi-file", datatype: "Report", description: "Malware", status: "RiskIQ", date: "21 Dec,2018", color: "TLP-WHITE", },
          { icon: "pi pi-file", datatype: "Report", description: "UNC1151", status: "RiskIQ", date: "21 Dec,2019", color: "TLP-WHITE", },
          { icon: "pi pi-file", datatype: "Report", description: "HermetricWiper", status: "AlienVault", date: "05 Jun,2017", color: "TLP-WHITE", },
        ],
        headerMenuItems: [
          {
            label: 'File',
            icon: 'pi pi-fw pi-file',
          },
          {
            label: 'Edit',
            icon: 'pi pi-fw pi-pencil',
          }
        ],
        ...otherVueModelObjects
      }
    }
  });


  // component namespace
  window.typerefinery.button = {};
  (function (vueApp, button) {
    console.log("____namespace____");

    button.vueButtonIsClicked = () => {
      console.log(this);
      console.log("INSIDE METHOD")
    }
    vueApp.component("p-button", primevue.button)
  })(vueApp, window.typerefinery.button);


  window.typerefinery.inputText = {};
  (function (vueApp, utils) {
    utils.vueInputOnChange = (e) => {
      console.log("On change.", e)
    }
    vueApp.component("p-inputtext", primevue.inputtext)

  })(vueApp, window.typerefinery.inputText);

  //Accordion page namespace
  //  window.typerefinery.inputText = {};
  (function (vueApp) {
    vueApp.component("p-accordion", primevue.accordion)
    vueApp.component("p-accordiontab", primevue.accordiontab)
  })(vueApp);
  // namespace for checkbox
  (function (vueApp) {
    vueApp.component("p-checkbox", primevue.checkbox)
  })(vueApp);
  // namespace for Radiobutton
  (function (vueApp) {
    vueApp.component("p-radiobutton", primevue.radiobutton)

  })(vueApp);
  // namespace for cards.
  (function () {
    vueApp.component("p-card", primevue.card);
  })();

  // text area
  (function () {
    vueApp.component("p-textarea", primevue.textarea);
  })();

  // password
  (function () {
    vueApp.component("p-password", primevue.password);
    vueApp.component("p-divider", primevue.divider);
  })();

  // dropdown
  (function () {
    vueApp.component("p-dropdown", primevue.dropdown);
  })();
  //datatable
  (function () {
    vueApp.component("p-datatable", primevue.datatable);
    vueApp.component("p-column", primevue.column);
    vueApp.component("p-menubar", primevue.menubar);
  })();

  //Sidebar-tree
  (function () {
    vueApp.component("p-tree", primevue.tree,);
  })();


  vueApp.mount('#app');

</script>